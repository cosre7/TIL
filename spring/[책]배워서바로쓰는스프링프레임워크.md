# 목차
- [목차](#목차)
- [1. 스프링 프레임워크 소개](#1-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%86%8C%EA%B0%9C)
  - [1.1 소개](#11-%EC%86%8C%EA%B0%9C)
  - [1.2 스프링 모듈](#12-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%AA%A8%EB%93%88)
  - [1.3 스프링 IoC 컨테이너](#13-%EC%8A%A4%ED%94%84%EB%A7%81-ioc-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88)
  - [1.4 스프링의 장점](#14-%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98-%EC%9E%A5%EC%A0%90)
    - [1.4.1 지역과 전역 트랜잭션을 일관성 있게 섞어서 사용하기](#141-%EC%A7%80%EC%97%AD%EA%B3%BC-%EC%A0%84%EC%97%AD-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%84-%EC%9D%BC%EA%B4%80%EC%84%B1-%EC%9E%88%EA%B2%8C-%EC%84%9E%EC%96%B4%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)
    - [1.4.2 선언적 트랜잭션 관리](#142-%EC%84%A0%EC%96%B8%EC%A0%81-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC)
    - [1.4.3 보안](#143-%EB%B3%B4%EC%95%88)
    - [1.4.4 JMX](#144-jmx)
    - [1.4.5 JMS](#145-jms)
    - [1.4.6 캐싱](#146-%EC%BA%90%EC%8B%B1)
  - [1.5 간단한 스프링 애플리케이션](#15-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98)
    - [1.5.1 애플리케이션 객체와 객체 간 의존 관계 파악하기](#151-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B0%9D%EC%B2%B4%EC%99%80-%EA%B0%9D%EC%B2%B4-%EA%B0%84-%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0)
    - [1.5.2 파악한 애플리케이션 객체에 상응하는 POJO 클래스 만들기](#152-%ED%8C%8C%EC%95%85%ED%95%9C-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B0%9D%EC%B2%B4%EC%97%90-%EC%83%81%EC%9D%91%ED%95%98%EB%8A%94-pojo-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0)
    - [1.5.3 설정 메타데이터 만들기](#153-%EC%84%A4%EC%A0%95-%EB%A9%94%ED%83%80%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0)
    - [1.5.4 세터 메서드를 이용한 의존 관계 주입](#154-%EC%84%B8%ED%84%B0-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9E%85)
    - [1.5.5 스프링 컨테이너 인스턴스 만들기](#155-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0)
    - [1.5.6 스프링 컨테이너에 있는 빈에 접근하기](#156-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EC%9E%88%EB%8A%94-%EB%B9%88%EC%97%90-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0)
  - [1.7 스프링에 기반한 프레임워크들](#17-%EC%8A%A4%ED%94%84%EB%A7%81%EC%97%90-%EA%B8%B0%EB%B0%98%ED%95%9C-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EB%93%A4)

# 1. 스프링 프레임워크 소개
### 1.1 소개
- 개발자의 책임 : 전통적인 자바 엔터프라이즈 개발에서 유지 보수와 테스트가 쉽도록 구조가 제대로된 애플리케이션을 만들어야 한다. -> 다양한 디자인 패턴을 사용한다.
- 스프링 프레임워크 : 자바 엔터프라이즈 애플리케이션 개발을 단순하게 해주는 오픈 소스 애플리케이션 프레임워크
  - 구조가 잘 잡혀있다.
  - 유지 보수하기 쉽다.
  - 테스트하기 좋은 애플리케이션을 개발하기 위한 인프라를 제공한다.
  - 개발자는 애플리케이션의 비즈니스 로직을 작성하는 데 집중할 수 있게 되어 생산성이 좋아진다.
  - 독립 실행 자바 애플리케이션, 웹 애플리케이션, 애플릿 등 다양한 유형의 자바 애플리케이션을 개발할 수 있다.
- IoC(Inversion of Control, 제어의 역전) 컨테이너
  - DI(Dependency Injection, 의존 관계 주입) 기능을 제공한다.

### 1.2 스프링 모듈
- 스프링은 담당하는 애플리케이션 개발 요소에 따라 여러 모듈로 구성된다.
  - 핵심 컨테이너
    - 스프링의 기반을 이루는 모듈을 포함한다.
    - spring-core와 spring-beans 모듈은 스프링 DI 기능과 IoC 컨테이너 구현을 제공한다.
    - spring-expression 모듈은 스프링 애플리케이션에서 애플리케이션 객체 설정에 사용하는 SpEL(스프링 표현 언어) 지원을 제공한다.
  - AOP와 계측
    - AOP(관점 기반 프로그래밍)과 클래스 계측을 지원하는 모듈을 포함한다.
    - spring-aop 모듈은 AOP 기능, spring-instrument 모듈은 클래스 계측 지원을 제공한다.
  - 메시징
    - 메시지 기반 애플리케이션을 쉽게 개발하도록 도와주는 spring-messaging 모듈을 포함한다.
  - 데이터 접근/통합
    - 데이터베이스나 메시징 공급자와의 상호 작용을 쉽게 해주는 모듈을 포함한다.
    - spring-jdbc 모듈은 JDBC를 사용한 데이터베이스 사용을 단순화해준다.
    - spring-orm 모듈은 하이버네이트나 JPA와 같은 ORM(객체-관계 매핑) 프레임워크 통합을 제공한다.
    - spring-jms 모듈은 JMS 공급자와의 상호 작용을 쉽게 만들어준다.
    - spring-tx 모듈은 프로그램을 통해 트랜잭션 관리를 선언적으로 할 수 있다.
  - 웹
    - spring-webmvc 모듈은 서블릿(servlet)기반의 웹 애플리케이션과 RESTful 웹 서비스 개발을 쉽게 해준다.
    - spring-webflux 모듈은 반응형 웹 애플리케이션과 RESTful 웹 서비스 개발을 쉽게 해준다.
    - spring-websocket 모듈은 웹소켓 프로토콜을 사용하는 웹 애플리케이션 개발을 지원한다.
    - spring-web 모듈은 모든 웹 모듈이 공통으로 사용하는 클래스와 인터페이스를 정의한다.
  - 테스트
    - 단위 테스트와 통합 테스트를 도와주는 spring-test 모듈이 있다.    
- 스프링은 엔터프라이즈 애플리케이션 개발의 모든 측면을 다룬다.
- 스프링을 사용하면 웹 애플리케이션을 개발하고 데이터베이스에 접근하며, 트랜잭션을 관리하고 단위 테스트와 통합 테스트를 개발하는 등의 일을 할 수 있다.
- 스프링의 여러 모듈은 애플리케이션에 꼭 필요한 부분만 포함하도록 설계한다.
  - ex) DI 기능을 사용하려면 핵심 컨테이너 그룹 모듈만 포함하면 된다.
- 스프링 배포판 명명규약
```
  spring-<짧은 모듈 이름>-<스프링 버전>.jar
```   
- <짧은 모듈 이름> : 스프링 모듈의 짧은 이름
  - aop. beans, context, expressions..
- <스프링 버전> : 스프링의 버전
- ex) Spring 5.0.1.RELEASE 버전의 JAR 파일 -> spring-aop-5.0.1.RELEASE.jar, spring-beans-5.0.1.RELEASE.jar 등

### 1.3 스프링 IoC 컨테이너
- 스프링 애플리케이션에서 애플리케이션에 존재하는 객체를 생성하고 의존 관계를 주입하는 일을 담당한다.   
- 스프링 컨테이너는 애플리케이션 객체를 한꺼번에 책임지므로 애플리케이션을 조합하기 위해 팩토리(Factory)나 서비스 로케이터(Service Locator) 등의 디자인 패턴을 직접 구현할 필요가 없다.   
- 의존 관계를 만들고 주입하는 책임이 애플리케이션의 객체가 아닌 스프링 컨테이너에 있어 DI를 제어의 역전(IoC)라고도 부른다.
- 스프링 기반 애플리케이션에서 애플리케이션 객체와 그들의 의존 관계 정보는 설정 메타데이터(configuration metadata)를 사용해 지정한다.
- 스프링 IoC 컨테이너는 애플리케이션의 설정 메타데이터를 읽어서 애플리케이션 객체들과 그들의 의존 관계를 인스턴스화한다.
- 스프링 컨테이너는 애플리케이션의 설정 메타데이터를 읽어서 bean 엘리먼트로 정의된 애플리케이션 객체를 생성하며 의존 관계를 주입한다.   
- 스프링 컨테이너는 자바 리플렉션(reflection) API를 사용해 객체를 만들고 의존 관계를 주입한다.
- 스프링 컨테이너가 애플리케이션 객체를 생성하고 관리하므로 스프링 컨테이너를 통해 엔터프라이즈 서비스(트랜잭션 관리, 보안, 원격 접근 등)를 투명하게 객체에 적용할 수 있다.
- 스프링 컨테이너가 애플리케이션 객체에 추가 기능을 부여하고 애플리케이션 객체를 평범한 자바 객체(기존 자바 객체(Plain Old Object), POJO)로 모델링할 수 있다.
- 의존 관계(dependency) 
  - 객체가 다른 객체와 상호 작용하는 경우
  - ex) X 객체가 Y, Z 객체와 상호작용한다면, X 객체는 Y와 Z 객체와 의존 관계이다.
- DI
  - 객채 간의 의존 관계를 생성자 인수(constructor argument)나 세터 메서드 인수(setter method arguments)로 명시하고 객체를 생성할 때 생성자나 세터를 통해 의존 관계를 주입하는 방식을 따르는 디자인 패턴이다.
- 빈(beans)
  - 스프링 컨테이너가 생성하고 관리하는 애플리케이션 객체들.       
- POJO 클래스
  - POJO에 해당하는 자바 클래스
  - 프레임워크가 지정하는 인터페이스나 클래스를 구현 및 확장하지 않는 보통 자바 클래스   
  
     
### 1.4 스프링의 장점
- 스프링은 객체 생성과 의존 관계 주입을 처리함으로써 자바 애플리케이션 조합을 쉽게 만들어준다.
- 스프링은 POJO로 애플리케이션을 개발하는 것을 권장한다.
- 스프링은 번거로운 준비 코드를 알아서 처리해주는 추상화 계층을 제공하는 방식으로 JMS 공급자, JNDI, MBean 서버, 전자우편 서버, 데이터베이스 등과의 상호 작용을 쉽게 만들어준다.

### 1.4.1 지역과 전역 트랜잭션을 일관성 있게 섞어서 사용하기
- 트랜잭션을 사용하는 애플리케이션 개발에 스프링을 사용한다면 선언적 트랜잭션 관리(declarative transaction management)를 사용해 트랜잭션을 관리할 수 있다.
- 전통적인 접근 방식에서 여러 데이터베이스 변경을 하나의 작업 단위로 수행하려면 먼저 JDBC 연결의 자동 커밋(auto commit) 모드를 끈 다음 SQL 명령을 실행하고 마지막으로 트랜잭션을 커밋(또는 롤백)한다.

- 지역 트랜잭션
  - JDBC Connection과 같은 자원에 따라 정해지는 트랜잭션
  - JDBC Connection을 사용한 트랜잭션 관리 방식은 데이터베이스를 하나만 사용하는 경우(트랜잭션 자원이 하나인 경우)에 유효하다.

- 전역(global) 트랜잭션 (분산(distributed) 트랜잭션)
  - 사용하는 트랜잭션 자원이 둘 이상일 때 JTA(Java Transaction) API (자바 트랜잭션 API)를 사용해 관리하는 트랜잭션.
  - JTA를 사용하려면 JNDI (JTA API의 일부분)를 사용해 UserTransaction 객체를 가져와서 프로그램이 직접 트랜잭션을 시작하고 커밋(또는 롤백)해야 한다.
  
### 1.4.2 선언적 트랜잭션 관리
- 스프링을 사용하면 트랜잭션을 선언적(declarative)으로 관리할 수 있다.
- 메서드에 @Transactional 애너테이션을 설정하면 스프링이 트랜잭션을 관리한다.
- 애노테이션은 스프링의 기능을 활용하기 위해 애플리케이션에서 스프링의 클래스나 인터페이스에 의존하지 않아도 된다는 사실을 보여주므로 스프링이 비-침입적(non-invasive)이라는 사실을 나타낸다.
  
### 1.4.3 보안
- 스프링 시큐리티(Spring Security) : 스프링 위에 만들어진 프로젝트
- 스프링 시큐리티는 자바 애플리케이션을 안전하게 만들기 위해 필요한 사용자 인증(authentication)과 권한 부여(authorization) 기능을 제공한다.
- @Secured : 스프링 시큐리티로 보안 기능을 투명성 있게 추가할 수 있다.
  
### 1.4.4 JMX
- 스프링의 JMX(Java Management Extension, 자바 관리 확장) 지원을 사용하면 애플리케이션에 쉽게 JMX 기술을 덧붙일 수 있다.
- 클래스에 @ManagedResource를 설정하면 클래스의 인스턴스를 MBean 서버에 등록할 수 있다.
- 메서드에 @ManagedOperation을 설정하면 @ManagedResource가 설정한 클래스의 메서드를 JMX 연산으로 노출시킬 수 있다.
  
### 1.4.5 JMS
- JMS 스프링의 JMS(Java Message Service, 자바 메시지 서비스)를 사용하면 JMS 제공자(provider)에게 메시지를 받거나 보낼 수 있다.
  
### 1.4.6 캐싱
- 스프링의 캐시 추상화를 사용하면 애플리케이션에서 일관성 있게 캐시를 사용할 수 있다.
  
### 1.5 간단한 스프링 애플리케이션
- 애플리케이션에서 스프링 DI 기능을 사용하기 위한 단계
  1. 애플리케이션에 쓰이는 여러 객체와 객체 간 의존 관계를 파악한다.
  2. 1단계에서 파악한 각 애플리케이션 객체에 상응하는 POJO 클래스를 만든다.
  3. 애플리케이션 객체 간 의존 관계를 표현하는 설정 메타데이터를 만든다.
  4. 스프링 IoC 컨테이너의 인스턴스를 만들고 설정 메타데이터를 인스턴스에 전달한다.
  5. 스프링 IoC 컨테이너 인스턴스로 애플리케이션 객체에 접근한다.
  
### 1.5.1 애플리케이션 객체와 객체 간 의존 관계 파악하기
웹 컨트롤러(Controller) -(의존)-> 서비스(Service) -(의존)-> DAO(Dao)
  
### 1.5.2 파악한 애플리케이션 객체에 상응하는 POJO 클래스 만들기
- 애플리케이션 객체를 파악한 후에 첫 번째로 할 일은 각 애플리케이션 객체에 대한 POJO 클래스를 만드는 것이다.
- 의존 관계가 있는 객체를 애플리케이션 객체의 생성자나 세터 메서드에 인수로 넘긴다.
  - Service(Controller가 의존)를 Controller 객체의 세터 메서드에 인수로 넘긴다.
- Controller, Service, Dao 클래스 모두 스프링 인터페이스를 구현하거나 스프링 클래스를 확장하지 않는다.
  
### 1.5.3 설정 메타데이터 만들기
- 스프링 컨테이너는 설정 메타데이터를 읽어서 애플리케이션 객체를 인스턴스화하고 의존 관계를 주입한다.
- 설정 메타데이터는 애플리케이션에 필요한 엔터프라이즈 서비스(트랜잭션 관리, 보안, 원격 접근 등) 정보를 지정한다. 
- 애플리케이션이 미들웨어(액티브MQ)나 데이터베이스(MySQL), 전자 우편 서버 등과 상호작용한다면, 외부 시스템과 더 쉽게 상효 작용할 수 있는 스프링 객체를 설정 메타데이터 안에서 정의해야 한다.
- 설정 메타데이터를 스프링 컨테이너에 전달하는 방법은 XML 파일을 사용하는 방법과 POJO 클래스에 애너테이션을 설정하는 방법이 있다.
- 일반적으로 스프링 컨테이너는 도메인 객체를 관리하지 않는다. 도메인 객체는 애플리케이션이 사용하는 ORM 프레임워크(하이버네이트 등)가 생성하거나 직접 new 연산자를 사용해 생성한다.

### 1.5.4 세터 메서드를 이용한 의존 관계 주입
- property 엘리먼트의 name 속성의 경우 빈 클래스에는 자바빈 스타일 세터 메서드 이름과 대응하며, 스프링 컨테이너는 빈 생성 시 이 세터 메서드를 호출한다.
- property의 ref 속성은 인스턴스를 생성한 다음 자바빈 스타일 세터 메서드에 전달할 빈을 가리킨다.
  - 이 ref 속성값은 설정 메타데이터에 있는 bean 엘리먼트 중 하나의 id 속성값(또는 name 에 지정된 이름 중 하나)과 일치해야 한다.
  
### 1.5.5 스프링 컨테이너 인스턴스 만들기
- 스프링 ApplicationContext 객체는 스프링 컨테이너 인스턴스를 표현한다.
  - 어떤 ApplicationContext를 선택하느냐는 설정 메타데이터의 정의 방법(XML, 애너테이션, 자바 코드 등) 과 애플리케이션의 유형 (웹 또는 독립 실행)에 따라 달라진다.
    - ex) 
      1. 설정 메타데이터를 XML 형태로 정의한 독립 실행 애플리케이션에 적합 -> ClassPathXmlApplicationContext, FileSystemXmlApplicationContext
      2. 설정 메타데이터를 XML 형태로 정의한 웹 애플리케이션에 적합 -> XmlWebApplicationContext
      3. 자바 코드를 통해 설정 메타데이터를 정의하는 웹 애플리케이션에 적합 -> AnnotationConfigWebApplicationContext
  
### 1.5.6 스프링 컨테이너에 있는 빈에 접근하기
- bean 엘리먼트를 통해 정의된 애플리케이션 객체는 스프링 컨테이너로 생성, 관리한다.
- 애플리케이션 객체 인스턴스는 ApplicationContext 인터페이스의 getBean 메서드 중 하나를 호출해서 접근할 수 있다.
- getBean에 넘기는 인수는 스프링 컨테이너에서 가져오려는 빈의 이름이다. getBean 메서드에 전달하는 빈 이름은 반드시 가져오려는 빈의 id나 name 속성과 같아야 한다.
  - 스프링 컨테이너에 등록된 이름과 지정한 이름이 일치하는 빈을 찾을 수 없으면 getBean 메서드가 예외를 발생시킨다.
  
### 1.7 스프링에 기반한 프레임워크들
- 스프링 시큐리티
  - 엔터프라이즈 애플리케이션을 위한 인증과 권한 부여 프레임워크
  - XML 파일에 빈을 몇 개 설정하는 것만으로 애플리케이션에 인증과 권한의 특징을 부여할 수 있다.
- 스프링 데이터
  - 여러 유형의 데이터베이스를 일관성 있는 프로그래밍 모델로 사용할 수 있게 해준다.
  - ex) Neo4j나 MongoDB와 같은 비-관계형 데이터베이스와 상호 작용할 때나, JPA를 통해 관계형 데이터베이스를 사용할 때도 사용가능하다.
- 스프링 배치
  - 애플리케이션이 뭉텅이로 작업을 처리하는 경우 사용하는 프레임워크
- 스프링 통합
  - 애플리케이션에 EAI(기업 애플리케이션 통합)를 제공하는 프레임워크
- 스프링 소셜
  - 소셜 미디어 사이트와 상호 작용해야 하는 경우 사용하는 프레임워크
- -> 사용 중인 스프링 버전과 호환되는 버전인지 먼저 확인 필요
  
# 2. 스프링 프레임워크 기초
### 2.2 '인터페이스를 사용하는 프로그래밍' 설계 원칙
- 의존 중인 클래스가 의존 관계의 구체적인 클래스를 직접 참조한다면, 두 클래스 사이에 긴밀한 결합(coupling)이 생긴다. 
  - '결합이 긴밀하다'는 말은 '의존 관계의 구현을 변경하려면 의존 중인 클래스도 변경해야 한다'는 뜻이다.
- 자바 인터페이스는 구현 클래스가 준수해야 하는 계약을 정의한다.
  - 클래스가 의존 관계를 구현하는 인터페이스에 의존한다면, 해당 의존 관계의 구현을 변경하더라도 의존 중인 클래스를 변경할 필요가 없다.
  - -> '인터페이스를 사용하는 프로그래밍(programmming to interface)' : 의존 중인 클래스가 의존 관계가 구현하는 인스턴스로 의존성을 만드는 설계 원칙 => 클래스와 의존 관계 사이에 느슨한 결합을 만든다.  
- '인터페이스를 사용하는 프로그래밍'은 '클래스를 사용하는 프로그래밍'보다 좋은 설계 습관이다.

### 2.2.1 '인터페이스를 사용하는 프로그래밍' 설계 방식 지원
- 의존 관계에 구체적인 구현 클래스가 아닌 의존 관계 인터페이스를 참조하는 빈 클래스를 만든다.
- 의존 중인 빈에 주입하고 싶은 구체적인 구현을 지정할 수 있는 bean 엘리먼트를 정의한다.

### 2.3 정적 팩토리 메서드나 인스턴스 팩토리 메서드를 사용해 빈 만들기
- 스프링 컨테이너는 인수가 없는 생성자 지원 여부에 상관없이 클래스의 인스턴스를 만들고 관리할 수 있다.
- 팩토리 클래스를 사용해 객체 인스턴스를 만드는 기존 자바 애플리케이션이 있다면, 스프링 컨테이너를 사용해 팩토리가 만든 객체를 관리할 수 있다.

### 2.3.1 정적 팩토리 메서드로 빈 초기화하기
- 빈 의존 관계는 스프링 컨테이너가 빈 인스턴스를 생성하는 방법(인수가 없는 생성자를 사용하든, 정적 팩토리 메서드를 사용하든)과 관계 없이 항상 같다.
- 

  
    
  
  


















